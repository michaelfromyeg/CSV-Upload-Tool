(this["webpackJsonpcsv-upload-tool"]=this["webpackJsonpcsv-upload-tool"]||[]).push([[0],{131:function(e,t){},133:function(e,t){},142:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(18),l=a.n(o),c=(a(85),a(86),a(28)),s=a.n(c),i=a(79),u=a(41),m=a(12),p=a(24),d=a.n(p),f=["firstName","lastName","asset","createdOn"],E=["Download our csv templates and add all of your lot information.","Upload the csv file containing your lot's information.","Drag and drop the uploaded groupings to match our groupings."],v="https://google.ca",h=a(143),b=a(150),g=a(151),x=a(144),O=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],l=a[1];return r.a.createElement(h.a,{isOpen:o,toggle:function(){return l((function(e){return!e}))}},r.a.createElement(b.a,{caret:!0},e.value),r.a.createElement(g.a,null,e.options.map((function(t){return r.a.createElement(x.a,{id:e.id,value:t,onClick:e.onChange},t)}))))},w=a(145),y=a(146),j=a(74),k=a(26),C=a(27);var S=function(){var e=E[0];return r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"ordered-list-icon"},"1"),"\u2003",e,"\u2003",r.a.createElement(j.a,{color:"primary",onClick:function(){d()({url:"".concat(v,"/download"),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","artesiansoft.csv"),document.body.appendChild(a),a.click()}))}},"Download (csv)\xa0\xa0",r.a.createElement(k.a,{icon:C.a}))))},N=a(152),A=function(e){var t=Object(n.useState)(e.visible),a=Object(m.a)(t,2),o=a[0],l=a[1];return r.a.createElement(N.a,{color:e.color,isOpen:o,toggle:function(){return l(!1)}},e.text)},T=a(77),F=a(147),U=a(148),Y=a(149),G=function(){var e=f,t=E[1],a=E[2],o={};e.map((function(e){return o[e]="None"}));var l=Object(n.useState)(""),c=Object(m.a)(l,2),p=c[0],h=c[1],b=Object(n.useState)({options:["None"]}),g=Object(m.a)(b,2),x=g[0],N=g[1],G=Object(n.useState)(o),D=Object(m.a)(G,2),J=D[0],B=D[1],q=Object(n.useState)({visible:!0,color:"info",text:"Upload your csv file before proceeding."}),I=Object(m.a)(q,2),L=I[0],M=I[1],P=Object(n.useState)({visible:!0,color:"info",text:"Then, upload your matches to our servers."}),R=Object(m.a)(P,2),W=R[0],z=R[1],$=function(e){J[e.target.getAttribute("id")]=e.target.value,B(J),N({options:x.options})},H=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r,o,l,c,u,m,d,f,E,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(t),n=Object.values(t),e.next=4,p.text();case 4:return r=e.sent,e.next=7,Object(T.a)(r,{header:!0});case 7:for(o=e.sent,l=[],c=o.data,u=0;u<c.length;u++){for(m=c[u],d=0;d<a.length;d++)f=a[d],E=n[d],m[f]=m[E],delete m[E];l.push(m)}return v=JSON.stringify(Object(i.a)({},c)),e.abrupt("return",v);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},a=Object.values(J),!Q(a)){e.next=6;break}z({visible:!0,color:"danger",text:"Your upload has failed. Check you have no duplicate matchings."}),e.next=11;break;case 6:return e.next=8,H(J);case 8:n=e.sent,console.log(JSON.stringify(n)),d.a.post("".concat(v,"/submit"),n,t).then((function(e){console.log(e),z({visible:!0,color:"success",text:"Your upload has succeeded. Thank you for using our form."})})).catch((function(e){console.warn("Error on the post request..."+e),z({visible:!0,color:"danger",text:"Your upload has failed. There appears to be an internal server error. Please try again later."})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e){return new Set(e).size!==e.length};return r.a.createElement(F.a,{className:"import"},r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("h3",null,"Import steps"))),r.a.createElement(S,null),r.a.createElement("div",{class:"spacer25"}),r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"ordered-list-icon"},"2"),"\u2003",t,r.a.createElement("div",{class:"input-group"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{onClick:function(){var e=new FormData;e.append("file",p),d.a.post("".concat(v,"/upload"),e).then((function(e){console.log(e),N({options:e.data[0]}),M({visible:!0,color:"success",text:"Your upload has succeeded. You match proceed to match our fields to yours."})})).catch((function(e){console.warn("Error on the post request..."+e),M({visible:!0,color:"danger",text:"Your upload has failed. There appears to be an internal server error. Please try again later."})}))},class:"input-group-text",id:"inputGroupFileAddon01"},"Upload\xa0\xa0",r.a.createElement(k.a,{icon:C.c}))),r.a.createElement("div",{class:"custom-file"},r.a.createElement("input",{type:"file",accept:".xls,.xlsx,.csv",class:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01",onChange:function(e){h(e.target.files[0])}}),r.a.createElement("label",{class:"custom-file-label",for:"inputGroupFile01"},""===p?"Choose file":p.name.split(/[\\/]/g).pop().split(".")[0]))))),r.a.createElement("div",{class:"spacer5"}),r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement(A,{visible:L.visible,color:L.color,text:L.text}))),r.a.createElement("div",{class:"spacer25"}),r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"ordered-list-icon"},"3"),"\u2003",a)),r.a.createElement("div",{class:"spacer25"}),r.a.createElement("hr",null),r.a.createElement(w.a,{xs:"2"},r.a.createElement(y.a,{xs:"6"},r.a.createElement("h4",null,"Match our fields to yours"),e.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{xs:"2"},r.a.createElement(y.a,{xs:"3"},e),r.a.createElement(y.a,{xs:"3"},r.a.createElement(O,{id:e,value:J[e],options:x.options,onChange:$}))),r.a.createElement("div",{class:"spacer10"}))}))),r.a.createElement(y.a,{xs:"6"},r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("h4",null,"Uploaded fields"),r.a.createElement(U.a,null,x.options.map((function(e){return r.a.createElement(Y.a,null,e)}))))))),r.a.createElement("div",{class:"spacer25"}),r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement(j.a,{color:"primary",onClick:K},"Submit matches\xa0\xa0",r.a.createElement(k.a,{icon:C.b})))),r.a.createElement("div",{class:"spacer5"}),r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement(A,{visible:W.visible,color:W.color,text:W.text}))))};var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(141);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a(142)},85:function(e,t,a){},86:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.0332e9c1.chunk.js.map